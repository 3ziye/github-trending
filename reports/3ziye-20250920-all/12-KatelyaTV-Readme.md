<div align="center">
  <img src="public/logo.png" alt="KatelyaTV Logo" width="128" />

  <h1>KatelyaTV</h1>
  <p><strong>è·¨å¹³å° Â· èšåˆæœç´¢ Â· å³å¼€å³ç”¨ Â· è‡ªæ‰˜ç®¡å½±è§†èšåˆæ’­æ”¾å™¨</strong></p>
  <p>åŸºäº <code>Next.js 14</code> Â· <code>TypeScript</code> Â· <code>Tailwind CSS</code> Â· å¤šæºèšåˆ / æ’­æ”¾è®°å½• / æ”¶è—åŒæ­¥ / è·³è¿‡ç‰‡å¤´ç‰‡å°¾ / PWA</p>
  
  <p>
    <a href="#-å¿«é€Ÿå¼€å§‹">ğŸš€ å¿«é€Ÿå¼€å§‹</a> Â·
    <a href="#-åŠŸèƒ½ç‰¹æ€§">âœ¨ åŠŸèƒ½ç‰¹æ€§</a> Â·
    <a href="#-éƒ¨ç½²æ–¹æ¡ˆ">ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆ</a> Â·
    <a href="#-é…ç½®è¯´æ˜">âš™ï¸ é…ç½®è¯´æ˜</a>
  </p>
</div>

---

## ğŸ“° é¡¹ç›®å£°æ˜

æœ¬é¡¹ç›®è‡ªã€ŒMoonTVã€æ¼”è¿›è€Œæ¥ï¼Œä¸ºå…¶äºŒåˆ›/ç»§æ‰¿ç‰ˆæœ¬ï¼ŒæŒç»­ç»´æŠ¤ä¸æ”¹è¿›åŠŸèƒ½ä¸ä½“éªŒã€‚ä¿ç•™å¹¶è‡´è°¢åŸä½œè€…ä¸ç¤¾åŒºè´¡çŒ®è€…ã€‚

> **ğŸ”” é‡è¦å˜æ›´**ï¼šåº”ç”¨æˆ·ç¤¾åŒºå»ºè®®ï¼Œä¸ºç¡®ä¿é¡¹ç›®é•¿æœŸç¨³å®šè¿è¡Œå’Œåˆè§„æ€§ï¼Œå†…ç½®è§†é¢‘æºå·²ç§»é™¤ã€‚ç°éœ€è¦ç”¨æˆ·è‡ªè¡Œé…ç½®èµ„æºç«™ä»¥ä½¿ç”¨å®Œæ•´åŠŸèƒ½ã€‚æˆ‘ä»¬æä¾›äº†ç»è¿‡æµ‹è¯•çš„æ¨èé…ç½®æ–‡ä»¶ï¼Œè®©æ‚¨å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¬ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ” èšåˆæœç´¢**ï¼šæ•´åˆå¤šä¸ªå½±è§†èµ„æºç«™ï¼Œä¸€é”®æœç´¢å…¨ç½‘å†…å®¹
- **ğŸ“º é«˜æ¸…æ’­æ”¾**ï¼šåŸºäº ArtPlayer çš„å¼ºå¤§æ’­æ”¾å™¨ï¼Œæ”¯æŒå¤šç§æ ¼å¼
- **â­ï¸ æ™ºèƒ½è·³è¿‡**ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶è·³è¿‡ç‰‡å¤´ç‰‡å°¾ï¼Œæ‰‹åŠ¨è®¾ç½®è·³è¿‡æ—¶é—´æ®µ
- **ğŸ¯ æ–­ç‚¹ç»­æ’­**ï¼šè‡ªåŠ¨è®°å½•æ’­æ”¾è¿›åº¦ï¼Œè·¨è®¾å¤‡åŒæ­¥è§‚çœ‹ä½ç½®
- **ğŸ“± å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘å„ç§å±å¹•

### ğŸ’¾ æ•°æ®ç®¡ç†

- **â­ æ”¶è—åŠŸèƒ½**ï¼šæ”¶è—å–œæ¬¢çš„å½±è§†ä½œå“ï¼Œæ”¯æŒè·¨è®¾å¤‡åŒæ­¥
- **ğŸ“– æ’­æ”¾å†å²**ï¼šè‡ªåŠ¨è®°å½•è§‚çœ‹å†å²ï¼Œå¿«é€Ÿæ‰¾å›çœ‹è¿‡çš„å†…å®¹
- **ğŸ‘¥ å¤šç”¨æˆ·æ”¯æŒ**ï¼šç‹¬ç«‹çš„ç”¨æˆ·ç³»ç»Ÿï¼Œæ¯ä¸ªç”¨æˆ·ç‹¬äº«ä¸ªäººæ•°æ®
- **ğŸ”„ æ•°æ®åŒæ­¥**ï¼šæ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼ˆLocalStorageã€Redisã€D1ã€Upstashï¼‰
- **ğŸ”’ å†…å®¹è¿‡æ»¤**ï¼šæ™ºèƒ½æˆäººå†…å®¹è¿‡æ»¤ç³»ç»Ÿï¼Œé»˜è®¤å¼€å¯å®‰å…¨ä¿æŠ¤

### ğŸš€ éƒ¨ç½²ç‰¹æ€§

- **ğŸ³ Docker ä¸€é”®éƒ¨ç½²**ï¼šæä¾›å®Œæ•´çš„ Docker é•œåƒï¼Œå¼€ç®±å³ç”¨
- **â˜ï¸ å¤šå¹³å°æ”¯æŒ**ï¼šVercelã€Dockerã€Cloudflare Pages å…¨å…¼å®¹
- **ğŸ”§ çµæ´»é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰èµ„æºç«™ã€ä»£ç†è®¾ç½®ã€ä¸»é¢˜é…ç½®
- **ğŸ“± PWA æ”¯æŒ**ï¼šå¯å®‰è£…ä¸ºæ¡Œé¢/æ‰‹æœºåº”ç”¨
- **ğŸ“º TVBox å…¼å®¹**ï¼šæ”¯æŒ TVBox é…ç½®æ¥å£

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ’¡ æ–¹æ¡ˆé€‰æ‹©æŒ‡å—

| ä½¿ç”¨åœºæ™¯     | æ¨èæ–¹æ¡ˆ         | å­˜å‚¨ç±»å‹     | æˆäººå†…å®¹è¿‡æ»¤ | å¤šç”¨æˆ· | éƒ¨ç½²éš¾åº¦ |
| ------------ | ---------------- | ------------ | ------------ | ------ | -------- |
| **ä¸ªäººä½¿ç”¨** | Docker å•å®¹å™¨    | localstorage | âŒ           | âŒ     | â­       |
| **å®¶åº­ä½¿ç”¨** | Docker + Redis   | redis        | âœ…           | âœ…     | â­â­     |
| **å…è´¹éƒ¨ç½²** | Vercel + Upstash | upstash      | âœ…           | âœ…     | â­â­â­   |
| **ç”Ÿäº§ç¯å¢ƒ** | Docker + Kvrocks | kvrocks      | âœ…           | âœ…     | â­â­     |
| **å…¨çƒåŠ é€Ÿ** | Cloudflare Pages | d1           | âœ…           | âœ…     | â­â­â­â­ |

> ğŸ’¡ **é‡è¦æç¤º**ï¼šæˆäººå†…å®¹è¿‡æ»¤åŠŸèƒ½éœ€è¦æ•°æ®åº“å­˜å‚¨æ”¯æŒï¼Œä¸æ”¯æŒ `localstorage` æ–¹å¼

---

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šDocker å•å®¹å™¨ï¼ˆæœ€ç®€å•ï¼‰

**ç‰¹ç‚¹**ï¼š5 åˆ†é’Ÿéƒ¨ç½²ï¼Œä¸ªäººä½¿ç”¨ï¼Œæ— å¤šç”¨æˆ·åŠŸèƒ½

```bash
docker run -d \
  --name katelyatv \
  -p 3000:3000 \
  -e PASSWORD=your_password \
  --restart unless-stopped \
  ghcr.io/katelya77/katelyatv:latest
```

**æŒ‚è½½è‡ªå®šä¹‰é…ç½®**ï¼ˆå¯é€‰ï¼‰ï¼š

```bash
docker run -d \
  --name katelyatv \
  -p 3000:3000 \
  -e PASSWORD=your_password \
  -v $(pwd)/config.json:/app/config.json:ro \
  --restart unless-stopped \
  ghcr.io/katelya77/katelyatv:latest
```

### æ–¹æ¡ˆäºŒï¼šDocker + Redisï¼ˆæ¨èå®¶åº­ä½¿ç”¨ï¼‰

**ç‰¹ç‚¹**ï¼šå®Œæ•´åŠŸèƒ½ï¼Œå¤šç”¨æˆ·æ”¯æŒï¼Œæˆäººå†…å®¹è¿‡æ»¤

```bash
# 1. ä¸‹è½½é…ç½®æ–‡ä»¶
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/docker-compose.redis.yml
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/.env.redis.example

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.redis.example .env
```

**ç¼–è¾‘ .env æ–‡ä»¶**ï¼š

```bash
# ç®¡ç†å‘˜è´¦å·ï¼ˆå¿…å¡«ï¼‰
USERNAME=admin
PASSWORD=your_secure_password

# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=redis
REDIS_URL=redis://katelyatv-redis:6379

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

```bash
# 3. å¯åŠ¨æœåŠ¡
docker compose -f docker-compose.redis.yml up -d
```

### æ–¹æ¡ˆä¸‰ï¼šDocker + Kvrocksï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

**ç‰¹ç‚¹**ï¼šæé«˜å¯é æ€§ï¼Œæ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ŒèŠ‚çœå†…å­˜

```bash
# 1. ä¸‹è½½é…ç½®æ–‡ä»¶
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/docker-compose.kvrocks.yml
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/.env.kvrocks.example

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.kvrocks.example .env
```

**ç¼–è¾‘ .env æ–‡ä»¶**ï¼š

```bash
# ç®¡ç†å‘˜è´¦å·ï¼ˆå¿…å¡«ï¼Œå¦åˆ™æ— æ³•ç™»å½•ï¼‰
USERNAME=admin
PASSWORD=your_secure_password

# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=kvrocks
KVROCKS_URL=redis://kvrocks:6666

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

```bash
# 3. å¯åŠ¨æœåŠ¡
docker compose -f docker-compose.kvrocks.yml up -d
```

### æ–¹æ¡ˆå››ï¼šVercel + Upstashï¼ˆå…è´¹æ¨èï¼‰

**ç‰¹ç‚¹**ï¼šå®Œå…¨å…è´¹ï¼Œè‡ªåŠ¨ HTTPSï¼Œå…¨çƒ CDN

#### åŸºç¡€éƒ¨ç½²

1. **Fork é¡¹ç›®** â†’ [GitHub ä»“åº“](https://github.com/katelya77/KatelyaTV)
2. **éƒ¨ç½²åˆ° Vercel**ï¼š
   - ç™»å½• [Vercel](https://vercel.com/)
   - å¯¼å…¥åˆš Fork çš„ä»“åº“
   - æ·»åŠ ç¯å¢ƒå˜é‡ï¼š`PASSWORD=your_password`
   - ç‚¹å‡» Deploy

#### å¤šç”¨æˆ·é…ç½®

3. **åˆ›å»º Upstash æ•°æ®åº“**ï¼š

   - è®¿é—® [Upstash](https://upstash.com/)
   - åˆ›å»ºå…è´¹ Redis æ•°æ®åº“
   - è·å– `UPSTASH_URL` å’Œ `UPSTASH_TOKEN`

4. **æ·»åŠ ç¯å¢ƒå˜é‡**ï¼š

```bash
# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=upstash
UPSTASH_URL=https://xxx.upstash.io
UPSTASH_TOKEN=your_token

# ç®¡ç†å‘˜è´¦å·
USERNAME=admin
PASSWORD=your_password

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

5. **é‡æ–°éƒ¨ç½²** â†’ Vercel Dashboard â†’ Redeploy

### æ–¹æ¡ˆäº”ï¼šCloudflare Pages + D1ï¼ˆå…¨çƒåŠ é€Ÿï¼‰

**ç‰¹ç‚¹**ï¼šå…¨çƒ CDNï¼Œæ— é™å¸¦å®½ï¼Œå…è´¹ SSL

#### å¿«é€Ÿéƒ¨ç½²

1. **Fork é¡¹ç›®** â†’ [GitHub ä»“åº“](https://github.com/katelya77/KatelyaTV)
2. **åˆ›å»º Pages é¡¹ç›®**ï¼š

   - ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
   - Pages â†’ Connect to Git â†’ é€‰æ‹©ä»“åº“
   - æ„å»ºè®¾ç½®ï¼š
     ```
     Build command: pnpm install --frozen-lockfile && pnpm run pages:build
     Build output directory: .vercel/output/static
     ```
   - å…¼å®¹æ€§æ ‡å¿—ï¼š`nodejs_compat`

3. **ç¯å¢ƒå˜é‡é…ç½®**ï¼š

```bash
# ç®¡ç†å‘˜è´¦å·
USERNAME=admin
PASSWORD=your_password

# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=d1

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

4. **åˆ›å»º D1 æ•°æ®åº“**ï¼ˆå¤šç”¨æˆ·æ”¯æŒï¼‰ï¼š

```bash
# å®‰è£…Wrangler CLI
npm install -g wrangler
wrangler auth login

# åˆ›å»ºæ•°æ®åº“
wrangler d1 create katelyatv-db
# âš ï¸ é‡è¦ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œæ­¤å‘½ä»¤
# å¦‚æœé‡åˆ°æ–‡ä»¶è·¯å¾„é”™è¯¯ï¼Œè¯·å‚è€ƒ D1_MIGRATION.md æ’æŸ¥æŒ‡å—
wrangler d1 execute katelyatv-db --file=./scripts/d1-init.sql
```

5. **é…ç½®æ•°æ®åº“ç»‘å®š** â†’ åœ¨ `wr