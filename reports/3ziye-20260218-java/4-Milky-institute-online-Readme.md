**‰∏≠ÊñáÁâà‰ªãÁªçÔºö** [Ë∑≥ËΩ¨](#ÊòüÁÄöÂ≠¶Â†Ç)

**English intro:**  [GOTO](#Milky-Institute)

# ÊòüÁÄöÂ≠¶Â†Ç

## È°πÁõÆÁÆÄ‰ªãÔºö

ÊòüÁÄöÂ≠¶Â†ÇÊòØ‰∏Ä‰∏™Âü∫‰∫éÂæÆÊúçÂä°Êû∂ÊûÑÁöÑÁîü‰∫ßÁ∫ßÂú®Á∫øÊïôËÇ≤È°πÁõÆÔºåÈù¢ÂêëÊàêÂπ¥‰∫∫ÁöÑÈùûÂ≠¶ÂéÜËÅå‰∏öÊäÄËÉΩÂüπËÆ≠„ÄÇÂàÜ‰∏∫Â≠¶ÁîüÁ´ØÂíåÁÆ°ÁêÜÁ´Ø‰∏§ÈÉ®ÂàÜ„ÄÇÈ°πÁõÆ‰∏≠‰∏ªË¶ÅÂåÖÂê´ÊúâÂ≠¶‰π†ÊúçÂä°„ÄÅ‰ºòÊÉ†Âà∏ÊúçÂä°„ÄÅËØæÁ®ãÊé®ËçêAI AgentÁ≠â„ÄÇÊòØ‚ÄúÂ§©Êú∫Â≠¶Â†Ç‚ÄùÁöÑËøõ‰∏ÄÊ≠•ÂÆûÁé∞ÂíåÊîπËøõÁâà„ÄÇÊú¨‰ªìÂ∫ì‰∏∫ÂêéÁ´Ø‰ªìÂ∫ì

## ÊäÄÊúØÊ†àÔºö

SpringCloud Alibaba„ÄÅSSM„ÄÅRedis/Redisson„ÄÅRabbitMQ„ÄÅMysqlÂàÜÂ∫ìÂàÜË°®„ÄÅXXL-Job„ÄÅSpring AIÁ≠â

## È°πÁõÆË¥üË¥£ÔºàÊ†∏ÂøÉÂäüËÉΩÔºâ

üÜï Â∑≤ÂÆåÊàêÔºö

1. Ë¥üË¥£ÂÆûÁé∞Â≠¶‰π†ÊúçÂä°ÔºåÂü∫‰∫éRedisÂêàÂπ∂ÂÜôËØ∑Ê±ÇÂíåDelayQueueÂÆûÁé∞Êñ≠ÁÇπÁª≠Êí≠ÂäüËÉΩÔºå‰ºòÂåñÈ´òÂπ∂ÂèëÁöÑÊï∞ÊçÆÂ∫ìÂÜô‰∏öÂä°Ôºå‰ΩøËØØÂ∑ÆÊéßÂà∂Âú®15ÁßíÂÜÖ„ÄÇ
2. Ë¥üË¥£‰ºòÊÉ†Âà∏ÁÆ°ÁêÜÂäüËÉΩÔºåÂèëÊîæ‰ºòÊÉ†Âà∏Êó∂Âà©Áî®Êåâ‰ΩçÂä†ÊùÉÊ±ÇÂíåÁÆóÊ≥ïÂíåÂºÇÊ≠•Á∫øÁ®ãÁîüÊàêÂÖëÊç¢Á†ÅÔºåÂπ∂Âà©Áî®BitMapÈ™åËØÅÂÖëÊç¢Á†ÅÊòØÂê¶Â∑≤ÁªèÂÖëÊç¢„ÄÇ‰øùËØÅ‰∫ÜÂÖëÊç¢Á†ÅÁöÑÂèØËØªÊÄß„ÄÅ‰∏çÂèØÈáçÂÖë„ÄÅÈò≤ÁàÜÂà∑ÂíåÈ´òÊïàÊÄß„ÄÇ
3. Ë¥üË¥£‰ºòÊÉ†Âà∏ÁöÑÈ¢ÜÂèñÂäüËÉΩÔºåÂà©Áî®‰πêËßÇÈîÅÂíåÂàÜÂ∏ÉÂºèÈîÅRedissonËß£ÂÜ≥Âπ∂ÂèëÂÆâÂÖ®ÈóÆÈ¢òÔºåËß£ÂÜ≥‰∫ãÂä°ËæπÁïåÂéüÂõ†ÂØºËá¥ÁöÑÈîÅÂ§±ÊïàÈóÆÈ¢òÔºåÈÄöËøáaspectjÂä®ÊÄÅ‰ª£ÁêÜËß£ÂÜ≥‰∫ãÂä°Â§±ÊïàÈóÆÈ¢ò„ÄÇ
4. Ë¥üË¥£ÂÆûÁé∞ÈÄöÁî®ÂàÜÂ∏ÉÂºèÈîÅÁöÑÂ∞ÅË£ÖÔºåÂü∫‰∫éAOP„ÄÅËá™ÂÆö‰πâÊ≥®Ëß£„ÄÅÂ∑•ÂéÇÊ®°ÂºèÂíåÁ≠ñÁï•Ê®°ÂºèÂÆûÁé∞„ÄÇ
5. Ë¥üË¥£‰ºòÊÉ†Âà∏ÁöÑ‰ΩøÁî®ÔºåÈÄöËøáÊü•ËØ¢ÊâÄÊúâÂèØÁî®‰ºòÊÉ†Âà∏ÔºåÁªèËøáÂàùÁ≠õ„ÄÅÁªÜÁ≠õ„ÄÅÊéíÂàóÁªÑÂêàËÆ°ÁÆóÂá∫ÊâÄÊúâÂèØÁî®‰ºòÊÉ†Âà∏ÁªÑÂêàÔºåÂπ∂Âü∫‰∫éCompleteableFutureÂπ∂Ë°åËÆ°ÁÆóÊØèÁßçÁªÑÂêàÁöÑ‰ºòÊÉ†ÊòéÁªÜÔºåÊúÄÂêéÊåâÁÖßËßÑÂàôÁ≠õÈÄâÂá∫ÊúÄ‰ºòËß£„ÄÇ



‚è≥ ÂºÄÂèëËÆ°Âàí

1. ËÆæËÆ°Âπ∂ÂÆûÁé∞ÈóÆÁ≠îËØÑËÆ∫Ê®°ÂùóÔºåÊ†πÊçÆÁî®Êà∑ÈÄâÊã©ÁöÑÂåøÂêç‰∏éÂê¶ÔºåËÆ∞ÂΩïÈóÆÁ≠îÊàñËÄÖËØÑËÆ∫‰ø°ÊÅØÔºåÂπ∂‰∫ßÁîüÂØπÂ∫îÁöÑÁßØÂàÜÔºåÈÄöËøáRabbitMQÊé®ÈÄÅÁªôÁßØÂàÜÁ≥ªÁªü„ÄÇ
2. ÁÇπËµûÊúçÂä°ÁöÑÊê≠Âª∫‰∏éÂÆûÁé∞ÔºåÁî®Êà∑ÂâçÁ´ØÂèëÈÄÅÁÇπËµûËØ∑Ê±ÇÂà∞ËææÁÇπËµûÊúçÂä°ÔºåÁÇπËµûÊúçÂä°Ë¥üË¥£Â≠òÂÇ®ÁÇπËµûËÆ∞ÂΩï‰∏éÁÇπËµûÊï∞ÈáèÔºåÂπ∂ÈÄöËøáÂÆöÊó∂‰ªªÂä°ÂèëÈÄÅMQÊ∂àÊÅØÈÄöÁü•‰∏öÂä°ÊñπÊõ¥Êñ∞ÁÇπËµûÊï∞Èáè„ÄÇ
3. Á≠æÂà∞ÂäüËÉΩÂÆûÁé∞‰∏é‰ºòÂåñÔºåÂü∫‰∫éBitMapÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®Á≠æÂà∞ËÆ∞ÂΩïÔºåÈÄöËøáMQÊé®ÈÄÅÁ≠æÂà∞‰ø°ÊÅØÂèäÁßØÂàÜÂà∞ÁßØÂàÜÊúçÂä°„ÄÇ
4. ÁßØÂàÜÊéíË°åÊ¶úÂäüËÉΩÂÆûÁé∞ÔºåÂà©Áî®RedisÁöÑZsetÂ≠òÂÇ®Êú¨ÊúàÂÆûÊó∂ÊéíË°åÊ¶úÊï∞ÊçÆ„ÄÇÈÄöËøáXXL-JobÂàÜÁâá‰ªªÂä°ÊåÅ‰πÖÂåñÂéÜÂè≤Ê¶úÂçïÂà∞MysqlÊï∞ÊçÆÂ∫ì‰∏≠ÔºåMysqlÈááÁî®ÁöÑÊòØÂàÜÂ∫ìÂàÜË°®ÔºåÂà©Áî®MybatisPlusÁöÑÂä®ÊÄÅË°®ÂêçÊù•ËÆ°ÁÆóË°®Âêç„ÄÇ
5. ÂÆåÊàêlangchainÊô∫ËÉΩ‰ΩìÊ®°Âùó„ÄÇ

## È°πÁõÆËøõÂ∫¶

Âü∫‰∫é‚ÄúÂ§©Êú∫Â≠¶Â†Ç‚ÄùÂü∫Á°ÄÁâàÊú¨Ôºå‰∏Ä‰∫õÂäüËÉΩÊ≤°ÂÅö

Áõ∏ÂÖ≥ÂæÆÊúçÂä°Âèä1.0.0ÁâàÊú¨ÁöÑÂÆåÊàêÁä∂ÊÄÅÂ¶Ç‰∏ãÔºö

| ÂæÆÊúçÂä°ÂêçÁß∞   | ÂäüËÉΩÊèèËø∞ | ÂÆåÊàêÁä∂ÊÄÅ        |
| ------------ | -------- | --------------- |
| tj-parent    | Áà∂Â∑•Á®ã   | ‚úÖ Â∑≤ÂÆåÊàê        |
| tj-api    | feignÊäΩÂèñ | üÜïÂ∑≤ÂÆåÊàêÔºàÂÆåÂñÑÔºâ |
| tj-common    | ÈÄöÁî®Â∑•Á®ã | üÜïÂ∑≤ÂÆåÊàêÔºàÂÆåÂñÑÔºâ |
| tj-message   | Ê∂àÊÅØ‰∏≠ÂøÉ | ‚úÖ Â∑≤ÂÆåÊàê        |
| tj-gateway   | ÁΩëÂÖ≥     | üÜïÂ∑≤ÂÆåÊàêÔºàÂÆåÂñÑÔºâ |
| tj-auth      | ÊùÉÈôêÊúçÂä° | üÜïÂ∑≤ÂÆåÊàêÔºàÂÆåÂñÑÔºâ |
| tj-user      | Áî®Êà∑ÊúçÂä° | ‚úÖ Â∑≤ÂÆåÊàê        |
| tj-pay       | ÊîØ‰ªòÊúçÂä° | ‚úÖ Â∑≤ÂÆåÊàê        |
| tj-course    | ËØæÁ®ãÊúçÂä° | üÜïÂ∑≤ÂÆåÊàêÔºàÂÆåÂñÑÔºâ |
| tj-exam      | ËÄÉËØïÊúçÂä° | ‚è≥ ÂºÄÂèë‰∏≠        |
| tj-search    | ÊêúÁ¥¢ÊúçÂä° | ‚úÖ Â∑≤ÂÆåÊàê        |
| tj-trade     | ‰∫§ÊòìÊúçÂä° | üÜïÂ∑≤ÂÆåÊàêÔºàÂÆåÂñÑÔºâ |
| tj-learning  | Â≠¶‰π†ÊúçÂä° | üÜïÂ∑≤ÂÆåÊàêÔºàÊñ∞Â¢ûÔºâ |
| tj-promotion | ‰øÉÈîÄÊúçÂä° | üÜïÂ∑≤ÂÆåÊàêÔºàÊñ∞Â¢ûÔºâ |
| tj-media     | Â™íËµÑÊúçÂä° | ‚úÖ Â∑≤ÂÆåÊàê        |
| tj-data      | Êï∞ÊçÆÊúçÂä° | ‚è≥ ÂºÄÂèë‰∏≠        |
| tj-remark    | ËØÑ‰ª∑ÊúçÂä° | ‚è≥ ÂºÄÂèë‰∏≠        |
| tj-agent    | langchainÊô∫ËÉΩ‰Ωì | ‚è≥ ÂºÄÂèë‰∏≠       |


## È°πÁõÆÂüüÂêçÂàóË°®

| ÂêçÁß∞             | ÂüüÂêç               | Ë¥¶Âè∑ÂØÜÁ†Å     | Á´ØÂè£  |
| ---------------- | ------------------ | ------------ | ----- |
| GitÁßÅÊúç          | git.tianji.com     | tjxt/123321  | 10880 |
| JenkinsÊåÅÁª≠ÈõÜÊàê  | jenkins.tianji.com | root/123     | 18080 |
| RabbitMQ         | mq.tianji.com      | tjxt/123321  | 15672 |
| NacosÊéßÂà∂Âè∞      | nacos.tianji.com   | nacos/nacos  | 8848  |
| xxl-jobÊéßÂà∂Âè∞    | xxljob.tianji.com  | admin/123456 | 8880  |
| ESÁöÑKibanaÊéßÂà∂Âè∞ | es.tianji.com      | -            | 5601  |
| ÂæÆÊúçÂä°ÁΩëÂÖ≥       | api.tianji.com     | -            | 10010 |
| Áî®Êà∑Á´ØÂÖ•Âè£       | www.tianji.com     | -            | 18081 |
| ÁÆ°ÁêÜÁ´ØÂÖ•Âè£       | manage.tianji.com  | -            |       |

## È°πÁõÆËøêÁª¥ÊµÅÁ®ã

Êèê‰∫§‰ª£Á†ÅÂà∞gogs-->ÈÄöÁü•jenkins-->jenkinsÊãâÂèñ‰ª£Á†Å-->Ëá™Âä®ÊûÑÂª∫-->Ëá™Âä®ÈÉ®ÁΩ≤-->Ëá™Âä®ÊµãËØïÔºàÂü∫‰∫éËÑöÊú¨Ôºâ



# Milky Institute

## Project Overview:

Milky Institute is a production-grade online education project built on a microservice architecture, focusing on non-academic vocational skills training for adults. It consists of two parts: the student portal and the admin portal. Key services within the project include Learning Service, Coupon Service, and Lesson Recommendation AI Agent. This project is an improved implementation of "Tianji Academy". This repository contains the backend codebase.

## Tech Stack:

SpringCloud, SSM, Redis/Redisson, RabbitMQ, MySQL (sharding by database and table), XXL-Job, Spring AI etc.

## Project Responsibilities (Core Features)

üÜï **Completed:**

1. Implemented the Learning Service, achieving resume-play functionality using Redis-based write request merging and DelayQueue. Optimized high-concurrency database write operations, controlling errors within 15 seconds.
2. Developed Coupon Management functionality: generated redemption codes using bitwise weighted sum algorithm and asynchronous threads during coupon distribution, and validated redemption status via BitMap. Ensured readability, non-redeemability, anti-brute-force protection, and high efficiency of redemption codes.
3. Built Coupon Collection functionality: resolved concurrency security issues using optimistic locking and Redisson distributed locks, fixed lock invalidation caused by transaction boundary issues, and addressed transaction failure via AspectJ dynamic proxy.
4. Implemented encapsulation of generic distributed locks based on AOP, custom annotations, Factory Pattern, and Strategy Pattern.
5. Developed Coupon Usage functionality: queried all available coupons, performed preliminary screening, detailed screening, and permutation-combination calculations to generate all valid coupon combinations. Calculated discount details for each combination in parallel using CompletableFuture, and finally filtered out the optimal solution according to predefined rules.

‚è≥ **Development Plan**

1. Design and implement the Q&A and Comment Module: record Q&A/comment information based on user-selected anonymity settings, generate corresponding points, and push data to the Points System via RabbitMQ.
2. Build and implement the Like Service: receive like requests from the frontend, store like records and counts, and send MQ messages via scheduled tasks to notify business parties of lik